<input id="user-input" placeholder="Pergunte algo..." />
<button onclick="enviar()">Enviar</button>
<div id="chat"></div>

<script>
const chatBox = document.getElementById("chat");
const input = document.getElementById("user-input");

async function enviar() {
  const texto = input.value.trim();
  if (!texto) return;
  addMensagem("VocÃª", texto);
  input.value = "";
  addMensagem("IA", "Pensando...");

  try {
    const res = await fetch("/api/chat", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ prompt: texto })
    });
    const data = await res.json();
    chatBox.lastElementChild.remove(); // remove "Pensando..."
    addMensagem("IA", data.resposta);
  } catch (err) {
    chatBox.lastElementChild.remove();
    addMensagem("IA", "Erro na IA ðŸ˜¢");
  }
}

function addMensagem(user, text) {
  const div = document.createElement("div");
  div.textContent = `${user}: ${text}`;
  chatBox.appendChild(div);
  chatBox.scrollTop = chatBox.scrollHeight;
}
</script>
