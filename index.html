<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Aurora v7 - Teste de IA</title>
  <style>
    body { font-family: Arial; padding: 30px; background: #0b0d17; color: #fff; }
    textarea { width: 100%; height: 100px; border-radius: 10px; padding: 10px; }
    button { margin-top: 10px; padding: 10px 20px; border: none; border-radius: 8px; background: #1e90ff; color: white; cursor: pointer; }
    #response { margin-top: 20px; white-space: pre-wrap; background: #111; padding: 20px; border-radius: 10px; }
  </style>
</head>
<body>
  <h1>Aurora v7 ðŸŒŒ</h1>
  <textarea id="prompt" placeholder="Digite sua pergunta..."></textarea><br>
  <button onclick="gerar()">Gerar resposta</button>
  <div id="response"></div>

  <script>
  async function gerar() {
    const prompt = document.getElementById("prompt").value;
    const resDiv = document.getElementById("response");
    resDiv.innerText = "Gerando resposta...";
    try {
      const res = await fetch("/api/generate", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ prompt })
      });

      const text = await res.text(); // <-- lÃª a resposta bruta
      let data;
      try {
        data = JSON.parse(text); // tenta converter para JSON
      } catch {
        throw new Error(`Resposta invÃ¡lida do servidor:\n${text}`);
      }

      if (!res.ok) throw new Error(data.error || "Erro desconhecido");
      resDiv.innerText = data.response || "Sem resposta.";
    } catch (err) {
      resDiv.innerText = "âš ï¸ " + err.message;
    }
  }
</script>

</body>
</html>
