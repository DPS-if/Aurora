<!-- index.html (sem mudanças significativas, mas confirme o fetch) -->
<!-- O trecho fornecido já está correto, mas para completude, assumindo que o resto do HTML é padrão. -->
<!-- Exemplo completo mínimo: -->

<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <title>Aurora v7</title>
</head>
<body>
    <h1>Aurora v7 - IA Generativa</h1>
    <input type="text" id="prompt" placeholder="Digite seu prompt...">
    <button onclick="gerar()">Gerar Resposta</button>
    <div id="response"></div>

    <script>
        const API_URL = window.location.origin + "/api/generate";

        async function gerar() {
          const prompt = document.getElementById("prompt").value;
          const resDiv = document.getElementById("response");
          resDiv.innerText = "Gerando resposta...";
          try {
            const res = await fetch(API_URL, {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({ prompt })
            });

            const text = await res.text();
            let data;
            try {
              data = JSON.parse(text);
            } catch {
              throw new Error(`Resposta inválida do servidor:\n${text || "[vazio]"}`);
            }

            if (!res.ok) throw new Error(data.error || "Erro desconhecido");
            resDiv.innerText = data.response || "Sem resposta.";
          } catch (err) {
            resDiv.innerText = "⚠️ " + err.message;
          }
        }
    </script>
</body>
</html>